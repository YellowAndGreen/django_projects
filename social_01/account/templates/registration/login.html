{% extends "base.html" %}
{% block title %}Log-in{% endblock %}
{% block content %}
<h1>Log-in</h1>

{#处理登录失败#}
{% if form.errors %}
<p>
Your username and password didn't match.
Please try again.
</p>
{% else %}
<p>Please, use the following form to log-in. If you don't have an
account <a href="{% url "register" %}">register here</a></p>
{% endif %}

<div class="login-form">
<form action="{% url 'login' %}" method="post">
{{ form.as_p }}
{% csrf_token %}
{#隐藏HTML表单，将提交变量next，在请求时传入，例：http://127.0.0.1:8000/account/login/?next=/account/#}
<input type="hidden" name="next" value="{{ next }}" />

<p><input type="submit" value="Log-in"></p>
</form>
<p><a href="{% url "password_reset" %}">Forgotten your password?</a></
p>
</div>
{% endblock %}